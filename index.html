<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Game Arena</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #121212;
    color: white;
    margin: 0;
    padding: 0;
  }
  .container {
    max-width: 500px;
    margin: 30px auto;
    padding: 15px;
  }
  h1, h2 {
    text-align: center;
  }
  h1 {
    font-size: 20px;
    margin-bottom: 10px;
  }
  h2 {
    font-size: 18px;
    margin-bottom: 10px;
    color: #ccc;
    font-weight: bold;
  }
  input, button {
    width: 100%;
    padding: 12px;
    font-size: 16px;
    margin: 6px 0;
    border-radius: 6px;
    border: none;
    box-sizing: border-box;
    background: #1e1e1e;
    color: white;
  }
  #teamname {
    font-weight: bold;
    text-transform: uppercase;
  }
  button {
    font-weight: bold;
    cursor: pointer;
  }
  button:disabled {
    background: #555;
    color: #aaa;
    cursor: not-allowed;
  }
  #continueBtn {
    background: gray;
    color: #ddd;
  }
  #continueBtn.enabled {
    background: gold;
    color: black;
  }
  #uploadBtn {
    background: gold;
    color: black;
  }
  #uploadBtn:hover {
    background: orange;
  }
  .hidden {
    display: none;
  }
  .g-recaptcha {
    margin: 10px 0;
  }
  .players input {
    padding: 12px 10px;
    font-size: 16px;
    margin: 4px 0;
    border-radius: 5px;
    width: 100%;
    box-sizing: border-box;
  }
  #paymentInfo {
    background: #2a2a2a;
    border-radius: 6px;
    padding: 12px;
    margin-top: 4px;
    font-size: 14px;
    line-height: 1.4;
    color: #ccc;
  }
  .copy-btn {
    display: inline-block;
    background: #444;
    color: #ddd;
    font-size: 12px;
    padding: 2px 8px;
    margin-left: 8px;
    border-radius: 4px;
    cursor: pointer;
    user-select: none;
    vertical-align: middle;
    transition: background-color 0.3s;
  }
  .copy-btn:hover {
    background: #666;
  }
  .custom-select {
    position: relative;
    user-select: none;
    margin: 12px 0;
  }
  .select-selected {
    background: #1e1e1e;
    padding: 12px;
    border-radius: 6px;
    cursor: pointer;
    color: white;
  }
  .select-selected:after {
    content: "\25BC";
    float: right;
    margin-left: 10px;
    color: #aaa;
  }
  .select-selected.select-arrow-active:after {
    content: "\25B2";
  }
  .select-items {
    position: absolute;
    background: #2a2a2a;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 99;
    border-radius: 0 0 6px 6px;
    max-height: 150px;
    overflow-y: auto;
    display: none;
  }
  .select-items div {
    padding: 12px;
    cursor: pointer;
    color: white;
  }
  .select-items div:hover {
    background: #444;
  }
  /* Custom Service Button and Popup */
  .serviceBtn {
    position: fixed;
    right: 20px;
    bottom: 20px;
    width: 56px;
    height: 56px;
    background: #ffcc00;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(255, 204, 0, 0.7);
    border: none;
    cursor: pointer;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1100;
    transition: background-color 0.3s ease;
  }
  .serviceBtn:hover {
    background: #e6b800;
  }
  .serviceBtn svg {
    width: 28px;
    height: 28px;
    fill: black;
  }
  .contactPopup {
    position: fixed;
    right: 20px;
    bottom: 80px;
    background: #222;
    border-radius: 8px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.8);
    padding: 10px 0;
    width: 180px;
    z-index: 1200;
    display: none;
    flex-direction: column;
  }
  .contactPopup.active {
    display: flex;
  }
  .contactPopup a {
    color: white;
    padding: 10px 20px;
    text-decoration: none;
    font-weight: bold;
    display: flex;
    align-items: center;
    transition: background-color 0.3s;
  }
  .contactPopup a:hover {
    background: #444;
  }
  .contactPopup a svg {
    width: 20px;
    height: 20px;
    margin-right: 10px;
    fill: #0088cc;
    flex-shrink: 0;
  }
</style>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
<div class="container">
  <h1 id="groupTitle">Group B</h1>
  <div id="step1">
    <input type="text" id="teamname" placeholder="Enter team name" autocomplete="off" />
    <input type="text" id="tgUsername" placeholder="Enter telegram username" autocomplete="off" />
    <input type="text" id="mobile" placeholder="Enter mobile number" autocomplete="off" />
    <div class="custom-select" id="customPaymentSelect" tabindex="0" aria-haspopup="listbox" aria-expanded="false" role="combobox">
      <div class="select-selected" aria-live="polite" aria-label="Payment method selection">Select payment method</div>
      <div class="select-items" role="listbox" tabindex="-1">
        <div role="option" data-value="Bk" tabindex="0">Bkash</div>
        <div role="option" data-value="Ng" tabindex="0">Nagod</div>
      </div>
    </div>
    <div id="paymentInfo" class="hidden" aria-live="polite"></div>
    <input type="text" id="trxid" placeholder="Enter Transaction Id" autocomplete="off" />
    <button id="continueBtn" disabled>Continue</button>
  </div>
  <div id="step2" class="hidden">
    <div class="players">
      <input type="text" id="player1" placeholder="Player 1 Name" autocomplete="off" />
      <input type="text" id="player2" placeholder="Player 2 Name" autocomplete="off" />
      <input type="text" id="player3" placeholder="Player 3 Name" autocomplete="off" />
      <input type="text" id="player4" placeholder="Player 4 Name" autocomplete="off" />
      <input type="text" id="player5" placeholder="Player 5 Name" autocomplete="off" />
    </div>
    <div class="g-recaptcha" data-sitekey="6LcAy58rAAAAABuoRRTaNeOHkbdo9NJUDiuqbq22"></div>
    <button id="uploadBtn">Submit</button>
  </div>
</div>

<!-- Custom Service Button -->
<button id="serviceBtn" aria-label="Contact service via Telegram" title="Contact service" class="serviceBtn" type="button">
  <!-- Example generic service icon (chat bubbles) -->
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
    <path d="M20 2H4C2.9 2 2 2.9 2 4v14l4-4h14c1.1 0 2-0.9 2-2V4c0-1.1-0.9-2-2-2zM6 14H4v-2h2v2zm10-1c0 .55-.45 1-1 1H9v-2h6c.55 0 1 .45 1 1z"/>
  </svg>
</button>

<!-- Popup with Telegram contacts -->
<div id="contactPopup" class="contactPopup" role="menu" aria-hidden="true" aria-label="Telegram contacts">
  <a href="https://t.me/NeoEchoo" target="_blank" rel="noopener" role="menuitem" tabindex="0">
    <!-- Telegram icon -->
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" aria-hidden="true" focusable="false">
      <path d="M120 0C53.73 0 0 53.73 0 120c0 66.27 53.73 120 120 120s120-53.73 120-120C240 53.73 186.27 0 120 0zm57.147 79.742-28.19 131.3c-2.16 9.554-15.538 12.098-21.064 3.916l-29.21-41.097-14.097 13.566c-1.553 1.553-2.848 2.848-5.813 2.848l2.08-29.34 53.323-48.227c2.32-2.08-0.5-3.236-3.614-1.157l-65.958 41.478-28.397-8.872c-9.28-2.73-9.454-9.28 1.934-13.67l112.22-43.228c5.15-1.732 9.68 1.157 8.27 13.67z"/>
    </svg>
    Helpline 1
  </a>
  <a href="https://t.me/shakildewan7" target="_blank" rel="noopener" role="menuitem" tabindex="0">
    <!-- Telegram icon -->
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" aria-hidden="true" focusable="false">
      <path d="M120 0C53.73 0 0 53.73 0 120c0 66.27 53.73 120 120 120s120-53.73 120-120C240 53.73 186.27 0 120 0zm57.147 79.742-28.19 131.3c-2.16 9.554-15.538 12.098-21.064 3.916l-29.21-41.097-14.097 13.566c-1.553 1.553-2.848 2.848-5.813 2.848l2.08-29.34 53.323-48.227c2.32-2.08-0.5-3.236-3.614-1.157l-65.958 41.478-28.397-8.872c-9.28-2.73-9.454-9.28 1.934-13.67l112.22-43.228c5.15-1.732 9.68 1.157 8.27 13.67z"/>
    </svg>
    Helpline 2
  </a>
</div>

<script>
  // Dropdown select logic
  const customSelect = document.getElementById('customPaymentSelect');
  const selected = customSelect.querySelector('.select-selected');
  const optionsContainer = customSelect.querySelector('.select-items');
  let selectedPaymentValue = '';

  const paymentTexts = {
    Bk: `Bkash Send Money<br><span id="paymentNumber">01798290256</span><span class="copy-btn" id="copyBtn" title="Click to copy">copy</span><br>Then enter the Trxid above`,
    Ng: `Nagad Send Money<br><span id="paymentNumber">9856001060189572</span><span class="copy-btn" id="copyBtn" title="Click to copy">copy</span><br>Then enter the Trxid above`
  };

  selected.addEventListener('click', () => {
    const expanded = customSelect.getAttribute('aria-expanded') === 'true';
    if (expanded) {
      optionsContainer.style.display = 'none';
      customSelect.setAttribute('aria-expanded', 'false');
      selected.classList.remove('select-arrow-active');
    } else {
      optionsContainer.style.display = 'block';
      customSelect.setAttribute('aria-expanded', 'true');
      selected.classList.add('select-arrow-active');
    }
  });

  optionsContainer.querySelectorAll('div').forEach(option => {
    option.addEventListener('click', () => {
      selected.textContent = option.textContent;
      selectedPaymentValue = option.getAttribute('data-value');
      selected.setAttribute('data-value', selectedPaymentValue);
      optionsContainer.style.display = 'none';
      customSelect.setAttribute('aria-expanded', 'false');
      selected.classList.remove('select-arrow-active');
      validateStep1();
      updatePaymentInfo(selectedPaymentValue);
    });
  });

  document.addEventListener('click', (e) => {
    if (!customSelect.contains(e.target)) {
      optionsContainer.style.display = 'none';
      customSelect.setAttribute('aria-expanded', 'false');
      selected.classList.remove('select-arrow-active');
    }
  });

  function updatePaymentInfo(val) {
    if(paymentTexts[val]) {
      paymentInfo.innerHTML = paymentTexts[val];
      paymentInfo.classList.remove('hidden');

      const copyBtn = document.getElementById('copyBtn');
      const paymentNumber = document.getElementById('paymentNumber');

      if(copyBtn && paymentNumber) {
        copyBtn.onclick = () => {
          const textToCopy = paymentNumber.textContent;
          navigator.clipboard.writeText(textToCopy).then(() => {
            alert(`Copied: ${textToCopy}`);
          }).catch(() => {
            alert('Copy failed. Please copy manually.');
          });
        };
      }
    } else {
      paymentInfo.innerHTML = '';
      paymentInfo.classList.add('hidden');
    }
  }

  const teamname = document.getElementById('teamname');
  const tgUsername = document.getElementById('tgUsername');
  const mobile = document.getElementById('mobile');
  const trxid = document.getElementById('trxid');
  const paymentInfo = document.getElementById('paymentInfo');
  const continueBtn = document.getElementById('continueBtn');
  const uploadBtn = document.getElementById('uploadBtn');
  const step1 = document.getElementById('step1');
  const step2 = document.getElementById('step2');

  function validateTeamName(name) {
    const upperName = name.toUpperCase();
    const regex = /^[A-Z0-9 \-']+$/;
    return regex.test(upperName);
  }

  function validateStep1() {
    const teamNameValue = teamname.value.trim();
    const isTeamNameValid = validateTeamName(teamNameValue);
    if (
      teamNameValue !== '' &&
      isTeamNameValid &&
      tgUsername.value.trim() !== '' &&
      mobile.value.trim() !== '' &&
      trxid.value.trim() !== '' &&
      selectedPaymentValue !== ''
    ) {
      continueBtn.disabled = false;
      continueBtn.classList.add('enabled');
    } else {
      continueBtn.disabled = true;
      continueBtn.classList.remove('enabled');
    }
  }

  teamname.addEventListener('input', () => {
    let val = teamname.value.toUpperCase();
    val = val.replace(/[^A-Z0-9 \-']/g, '');
    teamname.value = val;
    validateStep1();
  });

  [tgUsername, mobile, trxid].forEach(el => {
    el.addEventListener('input', validateStep1);
  });

  continueBtn.addEventListener('click', () => {
    if (continueBtn.disabled) {
      alert("Please fill all required fields correctly.");
      return;
    }
    step1.classList.add('hidden');
    step2.classList.remove('hidden');
  });

  // Telegram popup button
  const serviceBtn = document.getElementById('serviceBtn');
  const contactPopup = document.getElementById('contactPopup');

  serviceBtn.addEventListener('click', () => {
    const isActive = contactPopup.classList.contains('active');
    if (isActive) {
      contactPopup.classList.remove('active');
      contactPopup.setAttribute('aria-hidden', 'true');
    } else {
      contactPopup.classList.add('active');
      contactPopup.setAttribute('aria-hidden', 'false');
    }
  });

  // Close popup when clicking outside
  document.addEventListener('click', (e) => {
    if (!contactPopup.contains(e.target) && !serviceBtn.contains(e.target)) {
      contactPopup.classList.remove('active');
      contactPopup.setAttribute('aria-hidden', 'true');
    }
  });

  // Close popup on contact click and open link normally
  contactPopup.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      contactPopup.classList.remove('active');
      contactPopup.setAttribute('aria-hidden', 'true');
      // Link opens in new tab by default (target="_blank")
    });
  });
</script>
</body>
</html>